kaplay({width:640,height:384,canvas:document.querySelector("#mycanvas"),background:[158,158,217],gravity:500}),scene("game",(()=>{setGravity(500),setLayers(["bg","obj","ui"],"obj"),loadSprite("player","./sprites/sheets/sonny-complete3.png",{sliceX:3,sliceY:3,anims:{walk:{from:0,to:5,loop:!0},jump:{from:6,to:6,loop:!1},crouch:{from:7,to:7,loop:!1}}}),loadSprite("clouds","./sprites/sheets/clouds.png",{sliceX:3,sliceY:1,anims:{small:{from:0,to:0},medium:{from:1,to:1},large:{from:2,to:2}}}),loadSprite("grass","./sprites/assets/grass2.png"),loadSprite("bush","./sprites/assets/bush2.png"),loadSprite("house","./sprites/assets/house.png"),loadSound("meow","./sounds/cat-meow.mp3"),loadSound("purr","./sounds/cat-purr.mp3");let e="";loop(4,(()=>{let o=Math.floor(15*Math.random())+5,s=Math.floor(80*Math.random())+-30;const a=add([sprite("clouds"),layer("bg"),pos(650,s),area(),{dir:LEFT,speed:o}]);a.play((e=["small","medium","large"][Math.floor(3*Math.random())],e)),"large"==e&&(a.scale=2.1),"medium"==e&&(a.scale=1.2),a.onUpdate((()=>{a.move(a.dir.scale(a.speed)),a.pos.x<-60&&destroy(a)}))}));add([sprite("house"),pos(0,-10),area()]),add([sprite("bush"),pos(200,30),area()]),add([sprite("bush"),pos(-180,30),area()]);const o=add([sprite("player"),pos(50,50),body(),area(),offscreen({destroy:!0}),"player",{speed:300}]);add([sprite("grass"),pos(0,272),area()]);addLevel(["                    ","                    ","                    ","                    ","                    ","                    ","                    ","     xx         xx  ","                    ","                    ","xxxxxxxxxx     xxxxx","xxxxxxxxxxxxxxxxxxxx"],{tileWidth:32,tileHeight:32,tiles:{x:()=>[rect(32,32),opacity(0),area(),body({isStatic:!0}),"blank"]}}),o.onKeyDown((e=>{"right"!==e&&"d"!==e||(o.move(o.speed,0),o.flipX=!1),"left"!==e&&"a"!==e||(o.move(0-o.speed,0),o.flipX=!0),"down"!==e&&"s"!==e||o.move(0,o.speed),"up"!==e&&"w"!==e||o.move(0,0-o.speed)})),o.onKeyPress((e=>{"right"!==e&&"d"!==e||o.play("walk"),"left"!==e&&"a"!==e||o.play("walk"),"up"!==e&&"w"!==e||(o.play("jump"),meow=play("meow",{volume:.3,speed:.9,loop:!1})),"down"!==e&&"s"!==e||(o.play("crouch"),purr=play("purr",{volume:1,loop:!1}))})),o.onKeyRelease((e=>{"right"!==e&&"d"!==e||(o.stop("walk"),o.frame=0),"left"!==e&&"a"!==e||(o.stop("walk"),o.frame=0),"up"!==e&&"w"!==e||(o.stop("jump"),o.frame=0),"down"!==e&&"s"!==e||(o.stop("crouch"),o.frame=0,purr.stop())})),onUpdate((()=>{o.pos.x<0&&(o.pos.x=0),o.pos.x>width()&&(o.pos.x=width()),o.pos.y<0&&(o.pos.y=0),o.pos.y>height()&&(o.pos.y=height())}))})),go("game");