kaplay({width:640,height:384,canvas:document.querySelector("#mycanvas"),background:[158,158,217],gravity:500}),scene("game",(()=>{setGravity(500),loadSprite("player","./sprites/sonny-complete3.png",{sliceX:3,sliceY:3,anims:{walk:{from:0,to:5,loop:!0},jump:{from:6,to:6,loop:!1},crouch:{from:7,to:7,loop:!1}}}),loadSprite("grass","./sprites/grass2.png"),loadSprite("bush","./sprites/bush2.png"),loadSprite("house","./sprites/house.png");add([sprite("house"),pos(0,-10),area()]),add([sprite("bush"),pos(200,30),area()]),add([sprite("bush"),pos(-180,30),area()]);const e=add([sprite("player"),pos(50,50),body(),area(),offscreen({destroy:!0}),"player",{speed:300}]);add([sprite("grass"),pos(0,272),area()]);addLevel(["                    ","                    ","                    ","                    ","                    ","                    ","                    ","                    ","                    ","                    ","xxxxxxxxxxx    xxxxx","xxxxxxxxxxxxxxxxxxxx"],{tileWidth:32,tileHeight:32,tiles:{x:()=>[rect(32,32),opacity(0),area(),body({isStatic:!0}),"blank"]}}),e.onKeyDown((s=>{"right"!==s&&"d"!==s||(e.move(e.speed,0),e.flipX=!1),"left"!==s&&"a"!==s||(e.move(0-e.speed,0),e.flipX=!0),"down"!==s&&"s"!==s||e.move(0,e.speed),"up"!==s&&"w"!==s||e.move(0,0-e.speed)})),e.onKeyPress((s=>{"right"!==s&&"d"!==s||e.play("walk"),"left"!==s&&"a"!==s||e.play("walk"),"up"!==s&&"w"!==s||e.play("jump"),"down"!==s&&"s"!==s||e.play("crouch")})),e.onKeyRelease((s=>{"right"!==s&&"d"!==s||(e.stop("walk"),e.frame=0),"left"!==s&&"a"!==s||(e.stop("walk"),e.frame=0),"up"!==s&&"w"!==s||(e.stop("jump"),e.frame=0),"down"!==s&&"s"!==s||(e.stop("crouch"),e.frame=0)})),onUpdate((()=>{e.pos.x<0&&(e.pos.x=0),e.pos.x>width()&&(e.pos.x=width()),e.pos.y<0&&(e.pos.y=0),e.pos.y>height()&&(e.pos.y=height())}))})),go("game");